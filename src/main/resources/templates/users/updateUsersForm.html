<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}">
<body>

<div class="container">
    <div th:replace="~{fragments/bodyHeader :: bodyHeader}"></div>

    <form th:action="@{/users/{userId} (userId=${usersUpdateRequestDto.getUsersId()})}"
          th:object="${usersUpdateRequestDto}" method="post">
        <input type="hidden" name="_method" value="put">
        <input type="hidden" id="userId" name="userId" th:value="${usersUpdateRequestDto.getUsersId()}"
               th:field="*{getUsersId}">

        <div>
            <h4 class="text-muted">íšŒì› ì •ë³´ ìˆ˜ì •</h4>
            <br>
        </div>
        <div th:replace="~{fragments/form_errors :: formErrorsFragment}"></div>

        <div class="form-group">
            <label th:for="usersName">ì‚¬ìš©ì ID</label>

            <input type="text" th:field="*{usersName}" class="form-control" placeholder="ì‚¬ìš©ì IDë¥¼ ì…ë ¥í•˜ì„¸ìš” ğŸ‘©ğŸ»â€ğŸ’»" readonly>

        </div>
        <div class="form-group">
            <label th:for="nickname">ë‹‰ë„¤ì„</label>
            <input type="text" th:field="*{nickname}" class="form-control" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš” âœ¨"
                   th:class="${#fields.hasErrors('nickname')}? 'form-control fieldError' : 'form-control'">

        </div>
        <div class="form-group">
            <label th:for="email">ì´ë©”ì¼</label>
            <input type="text" th:field="*{email}" class="form-control" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš” ğŸ’Œ"
                   th:class="${#fields.hasErrors('email')}? 'form-control fieldError' : 'form-control'">

        </div>
        <div class="form-group">
            <label th:for="slogan">ìŠ¬ë¡œê±´</label>
            <input type="text" th:field="*{slogan}" class="form-control" placeholder="ë‚˜ë§Œì˜ ìŠ¬ë¡œê±´ì„ ì…ë ¥í•˜ì„¸ìš” ğŸ«¶ğŸ»">
        </div>
        <a href="/" role="button" class="btn btn-secondary">ì·¨ì†Œ</a>
        <button type="submit" class="btn btn-primary">ìˆ˜ì •</button>
        <a href="#" th:href="'javascript:deleteUsers('+${usersUpdateRequestDto.getUsersId()}+')'"
           class="btn btn-danger">íšŒì› íƒˆí‡´</a>
    </form>
    <br/>
    <div th:replace="~{fragments/footer :: footer}"></div>
</div> <!-- /container -->
</body>
<script>
    function deleteUsers(id) {
        var form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", "/users/" + id);

        // DELETE ë©”ì„œë“œ ì „ì†¡ì„ ìœ„í•œ ìˆ¨ê²¨ì§„ í•„ë“œ ìƒì„±
        var methodField = document.createElement('input');
        methodField.setAttribute("type", "hidden");
        methodField.setAttribute("name", "_method");
        methodField.setAttribute("value", "DELETE");

        // í¼ì— ìˆ¨ê²¨ì§„ í•„ë“œ ì¶”ê°€
        form.appendChild(methodField);

        // í¼ì„ ë¬¸ì„œì— ì¶”ê°€
        document.body.appendChild(form);

        // í¼ ì „ì†¡
        form.submit();

        alert('íšŒì› íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
</script>
</html>
